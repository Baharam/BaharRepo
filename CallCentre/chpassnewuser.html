<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href="Input.css" rel="stylesheet" type="text/css" media="screen" />
<link href="headstyle.css" rel="stylesheet" type="text/css" media="screen" />
<title>Interact Eduction</title>
</head>

<script> 
var RecaptchaOptions = {theme : 'clean'};

function save() { 

txt = 'f=' + fname.value + '&s=' + sname.value + '&c=' + comp.value + '&e=' 
	+ email.value + '&m=' + mobile.value + '&p=' + pass1.value;

xmlhttp=new XMLHttpRequest();
xmlhttp.open("POST","dBaseRegister.php",true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", txt.length);
xmlhttp.setRequestHeader("Connection", "close");


xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4)
      {	
	ans = xmlhttp.responseText;
	if(ans==0){
		alert('Registration failed!');
		document.getElementById("recap").innerHTML = '<input class="button" type="button" value="Save Changes" onclick="abc()" />';
		document.getElementById("cont").innerHTML = '';
	}
	document.getElementById("recap").innerHTML = '';
	document.getElementById("cont").innerHTML = '<input class="button" type="button" value="Register" onclick="hij()" />';
	document.getElementById("details").innerHTML = '<br /><br /><label for="smscode">SMS Code:- </label><input type="text" id="smscode" /><br /><br />';
      }
   }
xmlhttp.send(txt);
}

function hij() { 

txt = 's=' + smscode.value;

xmlhttp=new XMLHttpRequest();
xmlhttp.open("POST","dBaseRegister1.php",true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", txt.length);
xmlhttp.setRequestHeader("Connection", "close");


xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4)
      {	
	ans = xmlhttp.responseText;
	if(ans==0){
		alert('SMS Registration failed! Re-enter');
		return;
	}
	alert('Registration Successful.');
	location.href='login.html';
      }
   }
xmlhttp.send(txt);
}


function CheckPassword(password) { 
    var score = 1; 
    if (password.length < 1) 
       return 1; 
    if (password.length < 4) 
        return 1; 
    if (password.length >= 8) 
       score++; 
    if (password.length >= 10) 
       score++; 
    if (password.match(/\d+/)) 
       score++; 
    if (password.match(/[a-z]/) && 
       password.match(/[A-Z]/)) 
       score++; 
    if (password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,£,(,)]/)) 
   	   score++; 
       return score; 
} 

function abc() {
if (pass1.value != pass2.value) {
	alert('The new passwords do not match. Changes not saved.');
	return;
	}
        
if (CheckPassword(pass2.value) < 4) { 
        alert("Password is not strong enough!"); 
        return; 
        } 

	document.getElementById("recap").innerHTML = '';
	document.getElementById("cont").innerHTML = '<input class="button" type="button" value="Continue" onclick="def()" />';


            Recaptcha.create("6LdeQusSAAAAAO_PlIBaQ2Yo-oBX2AX3_T1uChw-", 'recap', {              
                tabindex: 1,
                theme: "clean",
                callback: Recaptcha.focus_response_field
            });
}

function def() {
txt = 'recaptcha_challenge_field=' + Recaptcha.get_challenge() + '&recaptcha_response_field=' + Recaptcha.get_response();
Recaptcha.destroy();

xmlhttp=new XMLHttpRequest();
xmlhttp.open("POST","verify.php",true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", txt.length);
xmlhttp.setRequestHeader("Connection", "close");


xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4)
      {	
	ans = xmlhttp.responseText;
	if(ans==0){
		alert('Wrong Verification Code');
		document.getElementById("recap").innerHTML = 
			'<input class="button" type="button" value="Save Changes" onclick="abc()" />';
		document.getElementById("cont").innerHTML = '';
		return;
	}
	save();
     }
   }
xmlhttp.send(txt);
}


</script> 


<body>
<script type="text/javascript" src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>

<div id="wrapper">
  <div id="header">
    <div id="logo">
    <h1>Pro-Active Training</h1>
    <h2>...Login Screen</h2>		
    </div>
  </div>
</div>
<div id="details"><br />
     <label for="fname">First Name:- </label> 
     <input type="text" id="fname" /><br /> 
     <label for="sname">Surname:- </label> 
     <input type="text" id="sname" /><br /> 
     <label for="comp">Company:- </label> 
     <input type="text" id="comp" /><br /> 
     <label for="email">Email:- </label> 
     <input type="text" id="email" /><br /> 
     <label for="mobile">Mobile No:- </label> 
     <input type="text" id="mobile" /><br /> 
     <label for="pass1">Password:- </label> 
     <input type="password" id="pass1" /><br /> 
     <label for="pass2">Confirm Password:- </label> 
     <input type="password" id="pass2" /><br /> 
     <br /><br />
</div>
<div id="recap">
    <input class="button" type="button" value="Save Changes" onclick="abc()" /> 
</div>
<div id="cont">
</div>
 
</body>
</html> 
